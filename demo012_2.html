<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>rainyday.js demo #2</title>
        <style media="screen">
            body {
                overflow: hidden;
                height: 100%;
                margin: 0;
                padding: 0;
            }

            img {
                width: 100%;
                height: 100%;
            }
        </style>
	    <script src="http://blog.cncounter.com/houtong/script/jquery/1.11.2/jquery.min.js"></script>
	    <script src="http://blog.cncounter.com/houtong/script/jquery.jdirk.js"></script>
	    <script src="dist/rainyday.0.1.2.min.js"></script>
        <script>
		
		function handlerFullScreen(){
			var height = window.innerHeight;
			var width = window.innerWidth;
			//
			var canvas = document.querySelector("canvas");
			canvas.width=width;
			canvas.height=height;
		};
            function run() {
                var image = document.getElementById('background');
                image.onload = function() {
                    var engine = new RainyDay({
                        image: this
                    });
		    engine.rain([ [3, 2, 2] ], 100);
		    //
		    $.util.requestFullScreen("canvas");
		    handlerFullScreen();
		};
                image.crossOrigin = 'anonymous';
                image.src = 'img/df2.jpg';
            }
        </script>
        <script>
            $(function () {
		$(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange', function(e) {
		var isFullScreen= $.util.isFullScreen();
		// 刚进入全屏
		if(isFullScreen){
			handlerFullScreen();
		} else {
			// 退出全屏
			handlerFullScreen();
		}
	    });
            });
        </script>
    </head>
    <body onload="run();">
        <img id="background" alt="background" src="" />
    </body>
</html>
